<?xml version="1.0" encoding="utf-8"?>
<Application
    x:Class="KonnectChatIRC.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:KonnectChatIRC"
    xmlns:models="using:KonnectChatIRC.Models"
    xmlns:converters="using:KonnectChatIRC.Converters">

    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <XamlControlsResources xmlns="using:Microsoft.UI.Xaml.Controls" />
            </ResourceDictionary.MergedDictionaries>

            <!-- Converters -->
            <converters:BoolToVisibilityConverter x:Key="BoolToVis" />
            <converters:BoolToVisibilityConverter x:Key="InverseBoolToVis" IsInverted="True" />
            <converters:InitialsConverter x:Key="InitialsConverter" />
            <converters:NotServerWindowConverter x:Key="NotServerWindowConverter" />
            <converters:StatusToColorConverter x:Key="StatusToColorConverter" />
            <!-- <converters:UserListToggleConverter x:Key="UserListToggleConverter" /> -->


            <!-- Pro Theme Palette -->
            <!-- Colors defined directly in Brushes to avoid WinUI XAML namespace issues with Color struct -->
            
            <SolidColorBrush x:Key="AppBackgroundBrush" Color="#0f0f12"/>
            <SolidColorBrush x:Key="SidebarBackgroundBrush" Color="#16161a"/>
            <SolidColorBrush x:Key="ChatBackgroundBrush" Color="#0f0f12"/>
            
            <SolidColorBrush x:Key="AccentBrush" Color="#7f5af0"/>
            <SolidColorBrush x:Key="AccentLightBrush" Color="#9e86f5"/>
            <SolidColorBrush x:Key="SuccessBrush" Color="#2cb67d"/>
            
            <SolidColorBrush x:Key="IncomingBubbleBrush" Color="#242629"/>
            <SolidColorBrush x:Key="OutgoingBubbleBrush" Color="#7f5af0"/>
            
            <SolidColorBrush x:Key="TextPrimaryBrush" Color="#ffffffff"/>
            <SolidColorBrush x:Key="TextSecondaryBrush" Color="#94a1b2"/>
            <SolidColorBrush x:Key="BorderBrush" Color="#2e2e36"/>

            <!-- Styles -->
             <Style x:Key="ProHeaderStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="16"/>
                <Setter Property="FontWeight" Value="SemiBold"/>
                <Setter Property="Foreground" Value="{StaticResource TextPrimaryBrush}"/>
            </Style>

            <!-- ProUserTemplate moved to MainWindow.xaml for ContextMenu bindings -->
            
            <!-- Channel List Item Template -->
            <DataTemplate x:Key="ProChannelTemplate">
                <Grid Padding="12,8" Background="Transparent">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button Grid.Column="0"
                            Command="{Binding DataContext.SelectedServer.ToggleFavoriteCommand, ElementName=MainGrid}"
                            CommandParameter="{Binding}"
                            Background="Transparent" BorderThickness="0" Padding="4"
                            VerticalAlignment="Center" Margin="0,0,4,0">
                        <Grid>
                            <FontIcon Glyph="&#xE734;" FontSize="14" Foreground="{StaticResource TextSecondaryBrush}" 
                                      Visibility="{Binding IsFavorite, Converter={StaticResource InverseBoolToVis}}"/>
                            <FontIcon Glyph="&#xE735;" FontSize="14" Foreground="Gold" 
                                      Visibility="{Binding IsFavorite, Converter={StaticResource BoolToVis}}"/>
                        </Grid>
                    </Button>

                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock Text="{Binding Name}" Foreground="{StaticResource TextPrimaryBrush}" FontWeight="Medium"/>
                    </StackPanel>

                    <Button Grid.Column="2" 
                            Command="{Binding DataContext.SelectedServer.PartChannelCommand, ElementName=MainGrid}"
                            CommandParameter="{Binding Name}"
                            Background="Transparent" BorderThickness="0" Padding="4"
                            VerticalAlignment="Center" HorizontalAlignment="Right"
                            ToolTipService.ToolTip="Leave Channel">
                        <FontIcon Glyph="&#xE711;" FontSize="12" Foreground="{StaticResource TextSecondaryBrush}"/>
                    </Button>
                </Grid>
            </DataTemplate>

        </ResourceDictionary>
    </Application.Resources>
</Application>

